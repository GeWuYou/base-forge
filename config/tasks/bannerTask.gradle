// banner操作 任务组


// 定义任务组
def bannerOperation = "bannerOperation"
// 注册复制任务
tasks.register('copyBanner', Copy, { Copy copy ->
    def bannerFile = file("${rootDir.path}/resources/banner.txt")
    def destination = file("${projectDir.path}/src/main/resources/banner.txt")
    if (bannerFile.exists() && !destination.exists()) {
        copy.from(bannerFile)
        println("正在复制 banner.txt 到 ${projectDir.path}")
        copy.into(destination.parent)
    } else {
        println("banner.txt 已存在，跳过复制。")
    }
}).configure {
    group = bannerOperation
    description = '将 banner.txt 复制到资源目录'
}
// 提供清理banner的任务
tasks.register("cleanBanner", Delete, { Delete delete ->
    def targetFile = file("${projectDir.path}/src/main/resources/banner.txt")
    if (targetFile.exists()) {
        delete.delete(targetFile)
    } else {
        println("banner.txt 文件不存在，无需删除。")
    }
}).configure {
    group = bannerOperation
    description = '删除资源目录下的 banner.txt 文件'
    // 仅在手动传递特定属性时执行
    onlyIf { project.hasProperty('runCleanBanner') }
}